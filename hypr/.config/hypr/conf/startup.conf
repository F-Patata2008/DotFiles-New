# --- CORE SERVICES (Order Matters) ---
# 1. Update DBUS, import environment, and start the session target sequentially to avoid race conditions
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP && systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP && systemctl --user start hyprland-session.target
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# --- THE SHELL (Noctalia/AGS) ---
exec-once = wal -R          # Restore Pywal colors

# --- PERFORMANCE HACKS ---
# This makes Thunar open INSTANTLY when you call it
exec-once = thunar --daemon

# --- HARDWARE & SYNC ---
exec-once = udiskie &       # USB Automount
exec-once = solaar --window=hide --battery-icons=symbolic > /dev/null 2>&1 &
exec-once = kdeconnectd     # Backend only (Noctalia has a widget for this)

# --- UTILS ---
exec-once = hypridle &
exec-once = clipse -listen  # Clipboard manager
exec-once = gnome-keyring-daemon --start --components=pkcs11,secrets,ssh

# --- USER APPS ---
# Only start what you actually need immediately
exec-once = kitty --class "Dotfiles" --directory ~/Dotfiles
